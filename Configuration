$ cat > cloudbeesCD-Config-Generator.sh <<EOF
#!/bin/bash

export projectName=$1
export serviceAccount=$2

oc create -n $projectName serviceaccount $serviceAccount
oc adm policy add-cluster-role-to-user edit system:serviceaccount:$projectName:$serviceAccount
oc adm policy add-cluster-role-to-user cluster-reader system:serviceaccount:$projectName:$serviceAccount
secretName=`oc describe  -n $projectName serviceaccount $serviceAccount | grep Tokens:|awk '{print $2}'`
TOKEN=$(oc get secret -n $projectName $secretName -o jsonpath='{.data.token}' | base64 -d)
APISERVER=$(kubectl config view | grep server | cut -f 2- -d ":" | tr -d " ")

echo -e "Openshift API Endpoint: \n$APISERVER\n"
echo -e "Openshift ProjectName : $projectName\n"
echo -e "Service Account : $serviceAccount\n"
echo -e "Bearer token: \n$TOKEN\n"
EOF
$ chmod +x cloudbeesCD-Config-Generator.sh

$ oc login https://test.letsgohomenow.com:8443 --token=jKRtoHa4RtdJzYKTgYqhv4e2Vems4pouN4Xqt8_SXXg
$ oc new-project my-dev
$ oc new-project my-prod
$ ./cloudbeesCD-Config-Generator.sh my-dev my-dev-sa
$ ./cloudbeesCD-Config-Generator.sh my-prod my-prod-sa 
